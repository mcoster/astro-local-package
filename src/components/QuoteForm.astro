---
export interface Props {
  formTitle?: string;
  formDescription?: string;
  submitText?: string;
  redirectTo?: string;
  standalone?: boolean;
}

import { siteConfig } from '@/config/site';

const {
  formTitle = 'Get a FREE Quote Today!',
  formDescription = '',
  submitText = 'REQUEST QUOTE >>',
  redirectTo = '/thank-you',
  standalone = true,
} = Astro.props;

const containerClass = standalone ? 'quote-form-section py-4' : '';
---

<div class={containerClass}>
  <div id="quote-form" class="quote-form-container quote-form-shadow bg-white rounded-lg p-6 md:p-8 container mx-auto max-w-2xl">
    <h2 class="text-2xl md:text-3xl font-bold italic text-gray-900 mb-6">
      {formTitle}
    </h2>
    {formDescription && (
      <p class="text-gray-600 mb-6">
        {formDescription}
      </p>
    )}
    
    <form
      name="quote-form"
      method="POST"
      data-netlify="true"
      data-netlify-honeypot="bot-field"
      action={redirectTo}
      class="space-y-4"
    >
      <!-- Netlify Forms hidden inputs -->
      <input type="hidden" name="form-name" value="quote-form" />
      
      <!-- Honeypot field for spam protection (hidden) -->
      <div class="hidden">
        <label>
          Don't fill this out if you're human: 
          <input name="bot-field" />
        </label>
      </div>
      
      <!-- Name Field -->
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary text-base"
        placeholder="Your Name*"
      />
      
      <!-- Phone Field -->
      <input
        type="tel"
        id="phone"
        name="phone"
        required
        pattern="[0-9]{10}|[0-9]{2} [0-9]{4} [0-9]{4}|\\([0-9]{2}\\) [0-9]{4} [0-9]{4}"
        class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary text-base"
        placeholder="Phone*"
      />
      
      <!-- Email Field -->
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary text-base"
        placeholder="Email*"
      />
      
      <!-- Service Area / Location -->
      <input
        type="text"
        id="location"
        name="location"
        required
        class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary text-base"
        placeholder="Location: eg. St Peters"
      />
      
      <!-- Description Field -->
      <div>
        <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
          Description
        </label>
        <textarea
          id="description"
          name="description"
          rows="3"
          class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-primary text-base"
          placeholder="Please briefly describe the services you require..."
        ></textarea>
      </div>
      
      <!-- Submit Button -->
      <div class="pt-2">
        <button
          type="submit"
          class="w-full inline-flex items-center justify-center btn-cta-primary"
        >
          {submitText}
        </button>
      </div>
      
      <!-- Privacy Notice -->
      <p class="text-xs text-gray-500 text-center">
        By submitting this form, you agree to our 
        <a href="/privacy" class="underline hover:text-primary">Privacy Policy</a>.
      </p>
    </form>
  </div>
</div>

<style>
  .quote-form-section {
    display: block;
  }
  
  .focus\:ring-primary:focus {
    --tw-ring-color: var(--color-primary);
  }
  
  .focus\:border-primary:focus {
    border-color: var(--color-primary);
  }
  
  .hover\:text-primary:hover {
    color: var(--color-primary);
  }
  
  /* Elegant layered shadow for form depth */
  .quote-form-shadow {
    box-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.08),
      0 4px 8px rgba(0, 0, 0, 0.08),
      0 8px 16px rgba(0, 0, 0, 0.08),
      0 16px 32px rgba(0, 0, 0, 0.08);
  }
</style>